 EXPLICACIN DE PLAYERHEALTHCONTROLLER


わ FUNCIN PRINCIPAL

Este script controla la vida del jugador, su muerte y la actualizaci贸n de la interfaz de usuario (UI) que muestra la salud.
Se encarga de reducir la vida cuando recibe da帽o, actualizar la barra de salud y ejecutar la animaci贸n y l贸gica de muerte cuando llega a 0.


锔 VARIABLES PRINCIPALES


anim: referencia al Animator para controlar las animaciones del jugador (como la muerte).

deathPlayer: indica si el jugador ha muerto (true o false).

currentHealth: salud actual del jugador.

maxHealth: salud m谩xima que puede tener.

healthSlider: barra de vida (UI tipo Slider) que muestra visualmente la salud.

healthText: texto en pantalla que muestra los valores num茅ricos de la salud.

playerController: referencia al script PlayerController, para poder ejecutar la funci贸n de muerte.


 INICIO (Start)


Obtiene el componente Animator del jugador.

Inicializa la salud actual con el valor m谩ximo (currentHealth = maxHealth).

Guarda la referencia al PlayerController del mismo objeto.

Configura los elementos de la interfaz (barra y texto) para que reflejen la salud actual y m谩xima.


 DAO Y MUERTE (TakeDamage)

El m茅todo TakeDamage(float damageReceived) se llama cuando el jugador recibe da帽o (por ejemplo, al chocar con un enemigo).

Verifica si el jugador ya est谩 muerto:

Si deathPlayer es verdadero, no se aplica m谩s da帽o.

Resta el da帽o recibido:

Disminuye currentHealth seg煤n el valor de damageReceived.

Si la salud baja de 0, se ajusta a 0 para evitar valores negativos.

Actualiza la interfaz:

Mueve el healthSlider para que muestre la nueva cantidad de vida.

Actualiza el texto healthText para reflejar los valores actuales.

Verifica si la salud lleg贸 a 0:

Cambia deathPlayer a true.

Activa la animaci贸n de muerte (anim.SetBool("isDeath", true)).

Llama a playerController.Die() para ejecutar la l贸gica de muerte (por ejemplo, desactivar movimiento o reiniciar el juego).


 EN RESUMEN


Este script gestiona toda la salud del jugador.

Controla la interfaz visual de vida (barra y texto).

Cuando recibe da帽o, actualiza la UI y, si llega a 0, activa la animaci贸n y secuencia de muerte.

Evita errores al impedir que se aplique da帽o extra si el jugador ya ha muerto.